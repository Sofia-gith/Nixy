<%- include('partials/header', { title: 'P치gina Inicial' }) %>
    <div class="login-coluns-usuarios">


        <div class="perfil-container">


            <form action="/upload-foto/<%= usuario.ID_USUARIO_T01 %>" method="POST" enctype="multipart/form-data">
                <div class="foto-perfil">
                    <% if (usuario && usuario.FOTO_PERFIL_URL) { %>
                        <img src="<%= usuario.FOTO_PERFIL_URL %>" alt="Imagem de perfil" />
                    <% } else { %>
                        <img src="/img/default.png" alt="Imagem padr칚o" />
                    <% } %>
                        <input type="file" name="foto" id="foto" accept="image/*" required>
                        <button type="submit" class="btn-camera">游닝</button>
                </div>
            </form>

        </div>

        <ul class="opcoes">
            <li><a href="/esqueciAsenha">Mudar senha</a></li>
             <li><a href="#" id="btnMudarNome">Mudar Nome</a></li>
            <li><a href="/acessibilidade">Acessibilidade/Contraste</a></li>
            <li><a href="/deleteUser">Excluir usuario</a></li>
            <li><a href="/logout">Sair</a></li>
        </ul>
    </div>

        <!-- Modal para mudar nome -->
    <div id="modalMudarNome" class="modalUser">
        <div class="modal-content-User">
            <span class="close-User">&times;</span>
            <h2>Alterar Nome</h2>
            <form action="/mudarNome" method="POST" id="formMudarNome">
                <div class="form-group-User">
                    <label for="novoNome">Novo Nome:</label>
                    <input type="text" id="novoNome" name="novoNome" value="<%= usuario.NOME_USUARIO_T01 %>" required>
                </div>
                <button type="submit" class="btn-salvar-User">Salvar</button>
            </form>
        </div>
    </div>

     <script>
        // Pegar o modal
        const modal = document.getElementById("modalMudarNome");
        
        // Pegar o bot칚o que abre o modal
        const btn = document.getElementById("btnMudarNome");
        
        // Pegar o elemento <span> que fecha o modal
        const span = document.getElementsByClassName("close")[0];
        
        // Quando o usu치rio clicar no bot칚o, abre o modal
        btn.onclick = function(e) {
            e.preventDefault();
            modal.style.display = "block";
        }
        
        // Quando o usu치rio clicar no <span> (x), fecha o modal
        span.onclick = function() {
            modal.style.display = "none";
        }
        
        // Quando o usu치rio clicar em qualquer lugar fora do modal, fecha ele
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Opcional: Fechar o modal ap칩s enviar o formul치rio com sucesso
        document.getElementById("formMudarNome").addEventListener("submit", function() {
            modal.style.display = "none";
        });
    </script>
    </div>